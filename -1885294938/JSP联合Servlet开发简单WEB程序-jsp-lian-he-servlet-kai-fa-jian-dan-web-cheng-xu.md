---
title: JSP联合Servlet开发简单WEB程序
date: 2022-07-06 23:37:55.324
updated: 2022-07-07 11:13:59.579
url: /archives/jsp-lian-he-servlet-kai-fa-jian-dan-web-cheng-xu
categories: 
- JavaWeb
tags: 
---

# 明确目标

根据在老杜的视频里面学到的东西，利用 JSP 和 Servlet 搭配使用的方式，仿照老杜所做的单表 CRUD 操作 WEB 应用，自己慢慢回想思路，慢慢从头到尾做一个，在这期间，自己不要去回看视频，尽量回想这个项目的整个流程，还有，之前自己跟着老杜已经写过一个功能一样的纯 Servlet 实现的应用了，在那个应用做起来的过程中，有遇到一些问题，在这次重新做这个应用的过程中，要认真思考，不能再犯同样的错误了，特别是一些程序的改善方面，像是数据库操作这个地方，之前在做的时候就出现过问题，这次一定要注意了。

# 开始前的准备工作

这是一个数据库操作的应用，所以是需要一个数据库的，现在我们先设计好一个数据库，然后往里面添加数据，将这个数据库准备好。这里我就不要和老杜一样设计一个部门列表了，我打算设计一个学生列表（(⊙o⊙)…，好像差不多），好吧，现在我们想一下，一个学生需要什么信息，他可能需要一个学号，一个姓名，一个性别，一个年龄，一个家庭住址，一个。。。，我们暂且就这么几个就行了。知道这张表里要填什么数据之后我们就将这张表建立起来吧。



在 IDEA 里面创建一个 Module ，为这个 Module 添加 web application 框架，添加 Tomcat 中的 jsp.jar 和 servlet.jar 这个两个 jar 包，添加 mysql 的 jar 包，在 Run/Debug Configuration 里面将项目添加上，配置好自动打开浏览器后要打开的地址。

# 思考一下要编写那些前端页面

- 首先是应用的欢迎页面，这个目前还没有特别多的功能，弄个简单一点的超链接就可以了，使用 web 文件夹下自带的 index.jsp 作为欢迎页面就行了。
- 数据库信息的预览页面，这个页面用来展示数据库中所有的数据的简略信息。
- 在每条简略信息的后面有对该条数据的操作，包括删除、修改和查看详情，这里进行删除操作后还是在这个在信息的预览页面中，不需要在创建一个页面；修改信息的时候需要查看到每条信息的详细情况，同时，还要有可以进行修改操作的地方，所以，修改操作需要一个页面，而且，修改完的数据还要上传给服务器，也就是说，这个页面中需要一个 form 表单；详情页面，也就是将数据的详细信息展示出来，这个需要一个展示的页面。
- 最后，我们可能需要增加数据库的信息，在增加这些信息的时候，我们需要填写入相关的信息，这里需要一个页面来让我们填写信息，这里填写的信息也是要上传给服务器的，所以也需要一个 form 表单。

总结一下，需要五个界面：

- 欢迎页面（index.jsp）
- 数据预览页面（list.jsp）
- 修改页面（edit.jsp）
- 详情页面（detail.jsp）
- 增加页面（add.jsp）

# 将需要的前端页面先写出来

将上面总结出来需要写的页面给写出来，然后，那些需要跳转的地方先不要急，在地址那里先写上 # ，等和后端的程序联动起来之后，根据实际的需要改成相应的地址就行了。

# 根据前端页面的跳转顺序编写Java程序

注意：下面写的这段东西中，页面指的都是 JSP 程序。还有罗里吧嗦一大堆的都是我旅顺思路的过程，最后的总结在更下面一点的地方。

首当其冲面向客户的页面就是欢迎页面了，所以，我们可以从欢迎页面看起，在欢迎页面中，我们只有一个链接，那么，这个链接就是我们要配置的第一个跳转页面了。我们先来分析一个这个跳转，这个链接点击下去之后，会跳转到数据库的数据预览界面，这里展示的数据我们需要先从数据库中读取，然后再展示，读取这个过程是需要 Servlet 对象来帮我们完成的，而展示我们选择让 JSP 来完成。接下来，我们再来分析一下这个数据预览界面中的链接，在这个界面有，有对各个预览数据操作的链接，如删除，修改，查看详情等，还有一个增加学生数据的链接也是在这个界面中。现在，我们先分析一下删除链接，这个链接点击之后，我们的数据库中对应的数据会被删除，然后，返回到这个页面，注意这里返回这个页面的时候数据已经少了一条，我们需要重新向服务器申请数据，然后在展示，也就是说，删除链接跳转到了一个 Servlet 程序，执行完删除操作之后，这个 Servlet 程序自动调用了预览页面。修改操作的话我们是需要跳转到一个让用户修改信息的页面，而用户修改的数据我们需要动态的从数据库中获取，因为点击预览界面中不同学生的修改选项，对应要修改的信息是不同的，所以这个页面在信息提交之后需要跳转到 Servlet 程序，对数据库中的信息进行修改，然后这个程序再跳转到预览页面中。对于查看详情页面，这个页面我们需要从数据库中获取指定学生的全部信息，然后展示给用户，这个链接的话需要跳转到一个 Servlet 程序中，查找学生的信息，然后这个 Servlet 程序调用展示页面，展示个用户看。在这里我们可以发现，修改操作和查看详情操作都需要一个 Servlet 程序去查找数据库中特定学生的信息，所以，这两个连接可以跳转到同一个 Servlet 程序，然后在这两个链接中指定不同的操作，方便后面跳转到不同的页面即可。最后，是增加学生数据的链接，这个链接跳转到对应的数据增加页面，然后，在点击提交增加学生数据的按钮之后，我们直接跳转到对应的 Servlet 程序进行处理，然后，跳转到数据预览页面即可。

在上面这个例子中，我们发现，要创建好多个 Servlet 不同的 Servlet 程序，也就是说，我们要写好多个不同的类，而这仅仅只是一个简简单单的对数据的增删改查操作而已，如果是一个完整的应用，类的数量可想而知是非常多的，那么在这里，我们可以使用模板方法来对这些 Servlet 类进行改造，我们可以只创建一个学生数据表类，在这个类中，我们根据不同的请求连接来区分不同的操作，然后执行不同的操作方法，这样，就可以浓缩为一个类了。

好了，这里我整理好思路之后要去敲代码了，敲好的代码放在 Github 仓库中，[点击](https://github.com/ShuYePL/JavaWeb)前往获取。

> 总结：就是要我们使用 JSP 和 Servlet 联合的方式建立起一个 WEB 应用，这其中我们通过模板方法，在一个继承 HttpServlet 类的类中，以区分不同访问路径的方式，去执行不同的方法，获取我们想要得到的数据或执行我们想要的操作，而前端页面我们使用 JSP 来展示，在编写 JSP 代码的时候要注意联想这个代码会转换成什么样的 Java 代码。

# 写程序的过程中经常使用的类及相应的方法

- request.getContextPath()：获取项目路径
- request.getServletPath()：获取访问链接
- response.sendRedirect("")：重定向
- request.getRequestDispatcher("").forward(request,response)：转发
- response.setContentType("")：指定向浏览器输出的文本格式
- response.getWriter()：得到一个向浏览器输出文本的对象
- conn.setAutoCommit()：关闭数据库操作的自动提交
- conn.commit()：提交数据库操作
- conn.rollback()：数据库操作回滚

# 注意点

- 在填写链接路径的地方要注意看是浏览器发起请求的还是服务器内部资源的流转，如果是内部资源的流转的话，不需要填写项目的路径，如果是浏览器发起的话，要填写项目的路径。
- 数据库操作那里关闭自动提交，操作过后一定要尽量判断操作的数据数量是否符合预期，不符合预期的可以回滚，尽可能减少数据库操作的失误
- 路径一定要写对，/ 要加上(\* / ω＼\*)



# 最后总结

看着老师做，或者跟着老师做的时候好简单，但是自己动手思考整个项目流程，还有做这一整个项目的时候，花的时间真的很长(⊙o⊙)…，差不多要一天的时间。。。

---

参考资料：https://www.bilibili.com/video/BV1Z3411C7NZ?p=39&share_source=copy_web